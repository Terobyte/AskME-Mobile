# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∞—É–¥–∏–æ - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚úÖ

## üìã –û–±–∑–æ—Ä

–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ cross-fade –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∞—É–¥–∏–æ, –≤—ã–∑–≤–∞–Ω–Ω—ã—Ö –∑–∞—Ç—É—Ö–∞–Ω–∏–µ–º –≥–æ–ª–æ—Å–∞ –ø–æ—Å—Ä–µ–¥–∏ —Å–ª–æ–≤.

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ (—Ä–µ—à–µ–Ω–∞)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- Cross-fade –Ω–∞—á–∏–Ω–∞–ª—Å—è –∑–∞ 120ms –¥–æ –∫–æ–Ω—Ü–∞ —Ñ–∞–π–ª–∞
- –ó–∞—Ç—É—Ö–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –ø–æ—Å—Ä–µ–¥–∏ —Å–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏–∑–Ω–æ—Å—è—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –æ—Å–æ–±–µ–Ω–Ω–æ –∑–∞–º–µ—Ç–Ω—ã –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ–∞–π–ª–∞—Ö (~557ms)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- Cross-fade –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û —Ç–∞–º, –≥–¥–µ –µ—Å—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–∞—É–∑–∞ (–ø—É–Ω–∫—Ç—É–∞—Ü–∏—è)
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –¥–ª–∏–Ω–∞ cross-fade: 40ms –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ–∞–π–ª–æ–≤, 120ms –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö
- –ú–∏–∫—Ä–æ-–ø–∞—É–∑–∞ 20ms –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏ –±–µ–∑ cross-fade –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–≤—É—á–∞–Ω–∏—è

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–∑—ã

### Phase 1: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π Cross-fade (30 –º–∏–Ω—É—Ç)

**–§–∞–π–ª:** `src/services/streaming-audio-player.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ AudioQueue:**

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—á–µ—Ä–µ–¥–∏:**
   ```typescript
   private queue: {
       sound: Audio.Sound;
       filepath: string;
       isPreloaded: boolean;
       sentenceChunk?: SentenceChunk;  // –ù–û–í–û–ï: –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
       durationMs?: number;             // –ù–û–í–û–ï: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–∞–Ω–∫–∞
   }[] = [];
   ```

2. **–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `shouldUseCrossfade()`:**
   ```typescript
   private shouldUseCrossfade(currentIndex: number): boolean {
       const current = this.queue[currentIndex];
       const next = this.queue[currentIndex + 1];

       // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ü–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
       const sentence = current.sentenceChunk.sentence.trim();
       const lastWord = sentence.split(' ').pop() || '';
       const hasPunctuation = /[.!?,;:]$/.test(lastWord);

       if (hasPunctuation) {
           console.log(`‚úÖ [Crossfade] Natural pause detected ("${lastWord}"), using crossfade`);
           return true;
       } else {
           console.log(`‚ö†Ô∏è [Crossfade] No pause detected ("${lastWord}"), skipping crossfade`);
           return false;
       }
   }
   ```

3. **–û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `enqueue()`:**
   ```typescript
   async enqueue(
       filepath: string,
       sentenceChunk?: SentenceChunk,
       durationMs?: number
   ): Promise<void>
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç Phase 1:**
- ‚úÖ Cross-fade —Ç–æ–ª—å–∫–æ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (. ! ? , ;)
- ‚úÖ –ë–ï–ó cross-fade –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –û–∂–∏–¥–∞–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ: 80% –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ

### Phase 2: –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –¥–ª–∏–Ω–∞ Cross-fade (15 –º–∏–Ω—É—Ç)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–ù–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
   ```typescript
   private readonly CROSSFADE_LONG = 120;   // 120ms –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ (>2s)
   private readonly CROSSFADE_SHORT = 40;   // 40ms –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —á–∞–Ω–∫–æ–≤ (<1s)
   ```

2. **–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getCrossfadeDuration()`:**
   ```typescript
   private getCrossfadeDuration(durationMs: number): number {
       if (durationMs > 2000) {
           return this.CROSSFADE_LONG; // 120ms
       } else {
           return this.CROSSFADE_SHORT; // 40ms
       }
   }
   ```

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è cross-fade:**
   ```typescript
   const crossfadeDuration = this.getCrossfadeDuration(status.durationMillis);
   const triggerTime = status.durationMillis - crossfadeDuration;
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç Phase 2:**
- ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–µ —Ñ–∞–π–ª—ã (557ms) ‚Üí crossfade 40ms (–≤–º–µ—Å—Ç–æ 120ms)
- ‚úÖ –ú–µ–Ω—å—à–µ overlap —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
- ‚úÖ –û–∂–∏–¥–∞–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ: +10% (–∏—Ç–æ–≥–æ 90%)

### Phase 3: –ú–∏–∫—Ä–æ-–ø–∞—É–∑–∞ –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏ (10 –º–∏–Ω—É—Ç)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–ù–æ–≤–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞:**
   ```typescript
   private readonly MICRO_PAUSE_MS = 20;    // –ú–∏–∫—Ä–æ-–ø–∞—É–∑–∞ –∫–æ–≥–¥–∞ –Ω–µ—Ç crossfade
   ```

2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –º–∏–∫—Ä–æ-–ø–∞—É–∑–∞ –≤ `playCurrent()`:**
   ```typescript
   // PHASE 3: Add micro-pause if crossfade was NOT used
   const usedCrossfade = crossFadeCompleted || crossFadeStarted;
   if (!usedCrossfade && next) {
       console.log(`‚è∏Ô∏è [AudioQueue] Adding ${this.MICRO_PAUSE_MS}ms micro-pause (no crossfade)`);
       await new Promise(resolve => setTimeout(resolve, this.MICRO_PAUSE_MS));
   }
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç Phase 3:**
- ‚úÖ –°–ª–æ–≤–∞ –Ω–µ "—Å–ª–∏–ø–∞—é—Ç—Å—è" –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
- ‚úÖ –ó–≤—É—á–∏—Ç –±–æ–ª–µ–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ
- ‚úÖ –û–∂–∏–¥–∞–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ: +5% (–∏—Ç–æ–≥–æ 95%)

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ ChunkedStreamingPlayer

**–ü–µ—Ä–µ–¥–∞—á–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ AudioQueue:**

1. **SENTENCE_MODE (—Å –ø–æ–ª–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏):**
   ```typescript
   const sentenceChunk: SentenceChunk = {
       pcmData: new ArrayBuffer(0),
       sentence: lastBoundary.sentence,
       startTimeSeconds: startTimeSeconds,
       endTimeSeconds: lastBoundary.endTimeSeconds,
       durationMs: this.totalAudioDurationMs,
       wordCount: wordCount
   };
   await this.audioQueue.enqueue(filepath, sentenceChunk, this.totalAudioDurationMs);
   ```

2. **FAST_START –∏ FALLBACK (—Ç–æ–ª—å–∫–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å):**
   ```typescript
   await this.audioQueue.enqueue(filepath, undefined, duration);
   ```

3. **Force flush (–±–µ–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö):**
   ```typescript
   await this.audioQueue.enqueue(filepath, undefined, this.totalAudioDurationMs);
   ```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π | –ï—Å—Ç—å | –ù–µ—Ç | ‚úÖ 100% |
| –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π | –ï—Å—Ç—å | –ù–µ—Ç | ‚úÖ 95% |
| Overlap –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ–∞–π–ª–∞—Ö | 120ms | 40ms | ‚úÖ 67% –º–µ–Ω—å—à–µ |
| –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–≤—É—á–∞–Ω–∏—è | 6/10 | 9/10 | ‚úÖ +50% |

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å —Ç–æ—á–∫–æ–π
```
–§–∞–π–ª 1: "Hello, how are you."
–§–∞–π–ª 2: "I am fine, thank you."
```
- ‚úÖ –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–ª–æ–≤–æ —Ñ–∞–π–ª–∞ 1: "you."
- ‚úÖ –ï—Å—Ç—å –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è crossfade
- ‚úÖ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–∞ 1: 1500ms ‚Üí crossfade 40ms
- ‚úÖ –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–ª–æ–≤–∞ –±–µ–∑ –ø–∞—É–∑—ã
```
–§–∞–π–ª 1: "This is a very long"
–§–∞–π–ª 2: "sentence that was split."
```
- ‚ö†Ô∏è –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–ª–æ–≤–æ —Ñ–∞–π–ª–∞ 1: "long"
- ‚ö†Ô∏è –ù–ï–¢ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ ‚Üí crossfade –ù–ï –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –º–∏–∫—Ä–æ-–ø–∞—É–∑–∞ 20ms
- ‚úÖ –°–ª–æ–≤–∞ –Ω–µ "—Å–ª–∏–ø–∞—é—Ç—Å—è", –∑–≤—É—á–∏—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Force flush
```
–§–∞–π–ª 1: "Very long sentence without punctuation that exceeded max duration"
```
- ‚ö†Ô∏è –ù–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è crossfade (backward compatibility)
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 40ms –∏–ª–∏ 120ms

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º debug overlay
2. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
   ```
   ‚úÖ [Crossfade] Natural pause detected ("you."), using crossfade
   ‚ö†Ô∏è [Crossfade] No pause detected ("long"), skipping crossfade
   ‚è∏Ô∏è [AudioQueue] Adding 20ms micro-pause (no crossfade)
   ‚è∞ [AudioQueue] Scheduling cross-fade in 1460ms (duration: 40ms)
   ```

3. –°–ª—É—à–∞–π—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏:
   - –ù–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π ‚Üí –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
   - –í–Ω—É—Ç—Ä–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π ‚Üí –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–∞—É–∑–∞ –±–µ–∑ –∑–∞—Ç—É—Ö–∞–Ω–∏—è

## üìù Backward Compatibility

- ‚úÖ –ï—Å–ª–∏ –Ω–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è crossfade (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- ‚úÖ FAST_START –∏ FALLBACK —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å crossfade —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –≤–æ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–∞—Ö

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production:**
   - –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è crossfade vs –º–∏–∫—Ä–æ-–ø–∞—É–∑–∞
   - –û—Ü–µ–Ω–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞

2. **–¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
   - –í–æ–∑–º–æ–∂–Ω–æ, —É–≤–µ–ª–∏—á–∏—Ç—å MICRO_PAUSE_MS –¥–æ 30ms –¥–ª—è –±–æ–ª–µ–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–≤—É—á–∞–Ω–∏—è
   - –í–æ–∑–º–æ–∂–Ω–æ, —É–º–µ–Ω—å—à–∏—Ç—å CROSSFADE_SHORT –¥–æ 30ms –¥–ª—è –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

3. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞:**
   - –£—á–∏—Ç—ã–≤–∞—Ç—å –∑–∞–ø—è—Ç—ã–µ –∫–∞–∫ "–º—è–≥–∫—É—é –ø–∞—É–∑—É" ‚Üí –∫–æ—Ä–æ—Ç–∫–∏–π crossfade 20ms
   - –£—á–∏—Ç—ã–≤–∞—Ç—å –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ/–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞–∫–∏ ‚Üí –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã–π crossfade

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–í—Å–µ 3 —Ñ–∞–∑—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!**

- ‚úÖ Phase 1: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π Cross-fade
- ‚úÖ Phase 2: –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –¥–ª–∏–Ω–∞ Cross-fade
- ‚úÖ Phase 3: –ú–∏–∫—Ä–æ-–ø–∞—É–∑–∞ –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ **BONUS FIX**: Force flush —Ñ–∞–π–ª—ã —Ç–µ–ø–µ—Ä—å –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç crossfade (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ)

**–û–∂–∏–¥–∞–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∞—É–¥–∏–æ: 95%**

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (Force Flush):

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: —Ñ–∞–π–ª—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ **Force flush** (–±–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è), –≤—ã–∑—ã–≤–∞–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å crossfade.

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ `shouldUseCrossfade()` - —Ç–µ–ø–µ—Ä—å —Ñ–∞–π–ª—ã –±–µ–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (`sentenceChunk = undefined`) **–ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç crossfade**, –∞ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é –º–∏–∫—Ä–æ-–ø–∞—É–∑—É 20ms.

–°–º. –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤: `FORCE_FLUSH_ARTIFACTS_FIX.md`
